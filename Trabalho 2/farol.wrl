#VRML V2.0 utf8


PROTO CircleExtrusion [

	field MFVec2f scale 1 1		

	field MFVec3f spine [0 0 0, 0 1 0] 
	
	field SFBool caps FALSE

	field SFFloat angle 1		

	field SFNode appearance NULL  

]{

	Shape {

		geometry Extrusion {

			crossSection [1 0, 0.966 0.259, 0.866 0.5, 0.707 0.707, 0.5 0.866, 0.259 0.966, 0 1, -0.259 0.966, -0.5 0.866, -0.707 0.707, -0.866 0.5, -0.966 0.259, -1 0, -0.966 -0.259, -0.866 -0.5, -0.707 -0.707, -0.5 -0.866, -0.259 -0.966, 0 -1, 0.259 -0.966, 0.5 -0.866, 0.707 -0.707, 0.866 -0.5, 0.966 -0.259, 1 0]	
	 
			spine IS spine

			ccw	FALSE

			endCap IS caps

			beginCap IS caps

			scale IS scale

			creaseAngle	IS angle
		}

		appearance IS appearance

	}

}

PROTO DonutExtrusion
[
	field SFVec3f scale 1 1 1
	field MFVec2f extrusionScale 0.05 0.05

	field SFNode appearance NULL  
]
{
	Transform
	{
		scale IS scale
		children
		[
			Shape 
			{
			 

				appearance IS appearance

				geometry Extrusion 
				{
					scale IS extrusionScale
					creaseAngle 30
					beginCap FALSE
					endCap   FALSE
					crossSection [
					# Circle
						 1.00  0.00,   0.92 -0.38,
						 0.71 -0.71,   0.38 -0.92,
						 0.00 -1.00,  -0.38 -0.92,
						-0.71 -0.71,  -0.92 -0.38,
						-1.00 -0.00,  -0.92  0.38,
						-0.71  0.71,  -0.38  0.92,
						 0.00  1.00,   0.38  0.92,
						 0.71  0.71,   0.92  0.38,
						 1.00  0.00
					]

					spine [
					# Circle
						 2.00 0.0  0.00,   1.85 0.0 0.77,
						 1.41 0.0  1.41,   0.77 0.0 1.85,
						 0.00 0.0  2.00,  -0.77 0.0 1.85,
						-1.41 0.0  1.41,  -1.85 0.0 0.77,
						-2.00 0.0  0.00,  -1.85 0.0 -0.77,
						-1.41 0.0 -1.41,  -0.77 0.0 -1.85,
						 0.00 0.0 -2.00,   0.77 0.0 -1.85,
						 1.41 0.0 -1.41,   1.85 0.0 -0.77,
						 2.00 0.0  0.00,
					]
				}
			}
		]
	}

}

PROTO Octagon [
	field MFVec3f spine [0 0 0, 0 1 0]
	field MFVec2f scale 1 1
	field SFBool wallsOutside TRUE
	field SFBool endCap TRUE
	field SFBool beginCap TRUE	  

	field SFNode appearance NULL  
]
{

	Shape {

		geometry Extrusion {

			crossSection [ 1 0.4, 1 -0.4, 0.4 -1, -0.4 -1, -1 -0.4, -1 0.4, -0.4 1, 0.4 1, 1 0.4 ]
			
			spine IS spine

			scale IS scale

			ccw	IS wallsOutside

			endCap IS endCap

			beginCap IS	beginCap

		}

		appearance IS appearance

	}

}

PROTO LighthouseBase [

	field SFNode OutterWallApp NULL
	field SFNode StoneApp NULL

]
{
	PROTO WallRocks [
		field SFNode StoneApp NULL	 
	]
	{
		
		Shape {

			geometry Extrusion {

				crossSection [ 0.4 0, 0.4 -0.33, 0 -0.33, 
					0 -0.66, 0.4 -0.66, 0.4 -0.99, 0 -0.99, 
					0 -1.32, 0.4 -1.32, 0.4 -1.65, 0 -1.65, 
					0 -1.98, 0.4 -1.98, 0.4 -2.31, 0 -2.31, 
					0 -2.64, 0.4 -2.64, 0.4 -2.97, 0 -2.97, 
					0 -3.30,	-0.4 -3.30, -0.4 0, 0.4 0 ]
				
					spine [ 0 0 0, 0 0 0.1 ] 		

			}

			appearance IS StoneApp
							   
		}

	}


	Group {

		children [

			Shape {

				geometry Extrusion {

					crossSection [ 1 0.4, 1 -0.4,  0.4 -1,  -0.4 -1, -1 -0.4, -1 0.4,  -0.4 1,  0.4 1,   1 0.4,   0.9 0.3, 0.3 0.9, -0.3 0.9, -0.9 0.3, -0.9 -0.3, -0.3 -0.9, 0.3 -0.9, 0.9 -0.3, 0.9 0.3, 1 0.4]
				  
					spine		 [0 0 0,   0 0.3 0, 0 0.3 0, 0 0.6 0, 0 0.6 0, 0 0.9 0, 0 0.9 0, 0 1.2 0, 0 1.2 0] 

					scale        [5.8 5.8, 5.8 5.8, 5.7 5.7, 5.7 5.7, 5.6 5.6, 5.6 5.6, 5.5 5.5, 5.5 5.5, 5.2 5.2 ] 					
				}

				appearance IS StoneApp

			}
			
			Shape {

				geometry Extrusion {

					crossSection [ 1 0.4, 1 -0.4,  0.4 -1,  -0.4 -1, -1 -0.4, -1 0.4,  -0.4 1,  0.4 1,   1 0.4,   0.9 0.3, 0.3 0.9, -0.3 0.9, -0.9 0.3, -0.9 -0.3, -0.3 -0.9, 0.3 -0.9, 0.9 -0.3, 0.9 0.3, 1 0.4]
				  
					spine		 [0 4.5 0, 0 4.5 0,   0 4.8 0,   0 4.9 0, 0 4.9 0,   0 5 0] 

					scale        [5.2 5.2, 5.37 5.37, 5.37 5.37, 5.6 5.6, 5.65 5.65, 5.65 5.65 ] 					
				}

				appearance IS StoneApp

			}  

			Octagon	{

				spine [0 1.2 0, 0 4.5 0]

				scale 5.3 5.3

				wallsOutside TRUE

				endCap FALSE

				appearance IS OutterWallApp

			}

			DEF PartialWall1 Group {

				children [

					Transform {

						translation	-1.7 1.2 5.4

						children WallRocks { StoneApp  IS StoneApp }

					}	 
					
					Transform {

						translation	1.7 1.2 5.4

						rotation 0 1 0 3.14

						children WallRocks { StoneApp  IS StoneApp }

					}


				]

			}
		
			Transform	{
					
				rotation	0 1 0 0.8		 

				children DEF PartialWall2 Group {

					children [

						Transform {

							translation	-1.7 4.5 5.3

							rotation 1 0 0 3.14

							children WallRocks { StoneApp  IS StoneApp }

						}	 
				
						Transform {

							translation	1.7 4.5 5.3

							rotation 0 0 1 3.14

							children WallRocks { StoneApp  IS StoneApp }

						}


					]

				}

			}

			Octagon	{
				  
				spine [0 0 0, 0 5 0] 

				scale 5 5	

				wallsOutside FALSE

				endCap	FALSE
		   
				appearance	Appearance {

					material Material {

						diffuseColor 0 0 0

					}

				}

			}

			Transform {

				translation	0 1.2 5.1
				
				children [
					
					Shape {

						geometry Extrusion {

							crossSection [ 0.65 0, 0.65 -2.80, -0.65 -2.80, -0.65 0, -0.40 0, -0.40 -2.50, 0.40 -2.50, 0.40 0, 0.65 0 ]
					   
							spine [ 0 0 0, 0 0 0.30 ]

						}

						appearance Appearance {

							material Material {

								diffuseColor 0.2 0.2 0.2

							}

						}

					}

					Transform {

						translation	0 2.80 0

						children Shape {

							geometry Extrusion {

								crossSection [ 0.65 0, 0.75 -0.2, 0 -0.3, -0.75 -0.2, -0.65 0, 0.65 0 ]
					   
								spine [ 0 0 0, 0 0 0.50 ]								

							}

							appearance Appearance {

								material Material {

									diffuseColor 0.2 0.2 0.2

								}

							}

						}

					}
					
					Transform {

						translation	-0.55 2.80 0.42							

						children DEF BaseDoorSupport Transform {

							rotation 0 0 1 3.14

							children Transform {	 

								rotation 1 0 0 1.57

								children Shape {

									geometry Extrusion {

										crossSection [ 0 0, 0.13 0, 0.13 -0.38, 0.09 -0.35, 0.07 -0.32, 0.04 -0.26, 0.02 -0.21,  0 0 ]
					   
										spine [ 0 0 0, 0.1 0 0 ]				

									}

									appearance Appearance {

										material Material {

											diffuseColor 0.2 0.2 0.2

										}

									}

								}

							}

						}
					}

					Transform {

						translation	0.65 2.80 0.42							

						children USE BaseDoorSupport  

					}

				]

			}

			Group {					 

				PROTO	StairWall [
				] 
				{
					
					Transform	{

						translation 0 0 5.8

						PROTO	TopBotBlock [
							field MFVec3f spine [0 0 0, 0 1 0]

							 

						] 
						{

							Shape {

								geometry Extrusion {

									crossSection [1 1, 1 -1, -1 -1, -1 1, 1 1]

									spine IS spine

									scale [0.20 0.8, 0.20 0.8, 0.13 0.73]

								}

								appearance Appearance {

									material Material {

										diffuseColor 0.3 0.3 0.3

									}

								}

							}

						}


						children [
												
							TopBotBlock	{ spine [0 0 0, 0 0.26 0, 0 0.28 0] }

							Transform {

								translation	0 0.68 0

								children Shape {

									geometry Box {

										size 0.26 0.80 1.3

									}

									appearance Appearance {

										material Material {

											diffuseColor 0.3 0.3 0.3

										}

									}

								}

							}

							TopBotBlock { spine [0 1.08 0, 0 1.20 0, 0 1.22 0] }

						]

					}
				}

				children [

					Transform {

						translation	-0.80 0 0
					
						children StairWall { }

					}

					Transform {

						translation	0.80 0 0
					
						children StairWall { }

					}

					DEF	OutsideStair Transform {

						translation 0 0.07 6.3

						children Shape	{
			
							geometry Box {

								size 1.45 0.14 0.12

							}

							appearance Appearance {

								material Material {

									diffuseColor 0.4 0.4 0.4

								}

							}

						}

					}

					Transform {

						translation	0 0.135 -0.10

						children USE OutsideStair

					}

					Transform {

						translation	0 0.275 -0.20

						children USE OutsideStair

					}

					Transform {

						translation	0 0.405 -0.30

						children USE OutsideStair

					}

					Transform {

						translation	0 0.535 -0.40

						children USE OutsideStair

					}

					Transform {

						translation	0 0.665 -0.50

						children USE OutsideStair

					}

					Transform {

						translation	0 0.795 -0.60

						children USE OutsideStair

					}

					Transform {

						translation	0 0.925 -0.70

						children USE OutsideStair

					}

					Transform {

						translation	0 1.065 -0.80

						children USE OutsideStair

					}

				]

			}

			Group {

				children [
					
					Group {

						children [

							Transform {

								translation	0 3.7 5.15
				
								children Shape {

									geometry Extrusion {

										crossSection [ 0.4 0, 0.4 0.50, -0.4 0.50, -0.4 0, -0.3 0.10, 0.3 0.10, 0.3 0.40, -0.3 0.40, -0.3 0.10, -0.4 0, 0.4 0]

										spine [ 0 0 0, 0 0 0.20 ]

										ccw	FALSE

									}

									appearance Appearance {

										material Material {

											diffuseColor 0.6 0.6 0.6

										}

									}

								}

							}

							Transform {

								translation	0 3.60 5.3

								children DEF AirVentPiece Transform {

									rotation 1 0 0 0.785

									children Shape {

										geometry Box {

											size 0.6 0.005 0.2

										}

										appearance Appearance {

											material Material {

												diffuseColor 0.1 0.2 0.3

											}

										}

									}

								}

							}

							Transform {

								translation	0 3.52 5.3

								children USE AirVentPiece

							}	 

							Transform {

								translation	0 3.44 5.3

								children USE AirVentPiece

							}

							Transform {

								translation	0 3.36 5.3

								children USE AirVentPiece

							}


						]
					}

					Group {

						children [

							DEF DoorTouchSensor TouchSensor {
        					}

							DEF RightDoor Transform	{
							
								center 0.40 2.2 5.25  								

								children Transform {

									translation	0.20 2.2 5.25

									children DEF	Door Shape {

										geometry Box {

											size 0.40 2 0.20

										}

										appearance Appearance {

											material Material {

												diffuseColor 0.7 0.7 0.7

											}

										}

									}

								}
							}
					
							DEF LeftDoor Transform { 

								center -0.40 2.2 5.25								
								
								children LOD	{

									range [ 20, 60 ]

									level	[
							
										Transform {

											translation	-0.20 2.2 5.25

											children [

												USE	Door

												Transform {

													translation	0.20 0 0.05

													children Shape {

															geometry Box {

																size 0.05 2 0.20

															}

															appearance Appearance {

																material Material {

																	diffuseColor 0.9 0.9 0.79

																}

															}
														}
												}

											]

										}   							
							
										Transform {

											translation	-0.20 2.2 5.25

											children USE	Door

										}

									]
								}
							}

							#Animations
							DEF doorAnimation TimeSensor {

								cycleInterval 6.000

								loop FALSE

								startTime  -1

							}

							DEF doorAnimation_rot0 OrientationInterpolator {
								 key [
								  0.0 0.25 0.75 1.0 
								 ]

								 keyValue [
								  0.0 1.0 0.0 0.0
								  0.0 1.0 0.0 1.571
								  0.0 1.0 0.0 1.571
								  0.0 1.0 0.0 0.0
								 ]
							}

							DEF doorAnimation_rot1 OrientationInterpolator {
								 key [
								  0.0 0.25 0.75 1.0 
								 ]

								 keyValue [
								  0.0 1.0 0.0 0.0
								  0.0 1.0 0.0 -1.571
								  0.0 1.0 0.0 -1.571
								  0.0 1.0 0.0 0.0
								 ]
							}

						] 

						ROUTE DoorTouchSensor.touchTime TO doorAnimation.startTime
						ROUTE doorAnimation.fraction_changed TO doorAnimation_rot0.set_fraction
						ROUTE doorAnimation.fraction_changed TO doorAnimation_rot1.set_fraction
						ROUTE doorAnimation_rot0.value_changed TO LeftDoor.set_rotation
						ROUTE doorAnimation_rot1.value_changed TO RightDoor.set_rotation						  

					}
				
				]
				
			}	
				
		]
	}
}

PROTO LighthouseTower [
	field SFNode appearance NULL
]
{
	CircleExtrusion { 
		
		scale [5.5 5.5, 4.5 4.5, 4.3 4.3, 5.3 5.3]
	
		spine [0 0 0, 0 49 0, 0 49 0, 0 0 0]

		appearance IS appearance

	}
}


PROTO PorchFenceAndSupport [
	field SFVec3f translation 0 0 0	   
	
	field SFNode appearance NULL 
]
{	
  	PROTO ScaledSphere [		

		field SFNode appearance NULL  
		field SFVec3f scale 1 1 1
	]
	{
		Transform {

			scale IS scale

			children Shape {

				geometry Sphere	{

					radius 0.01

				}

				appearance IS appearance

			}
		}
	}

	Group {

		children [

			Transform {

				translation	0 0.1 0

				children [

					Transform 
					{

						translation	IS translation					

						children [

							LOD {

								range [ 20, 70 ]
					
								level [

									Group {

										children [
					
											Octagon	{

												spine [ 0 0 0, 0 0.1 0 ]

												scale 0.1 0.1 

												appearance IS appearance

											}	


											Transform {

												translation	0 0.120 0

												children ScaledSphere {
										    
													scale 10 3 10

													appearance IS appearance
								    			}

											}

											Transform {

												translation	0 0.150 0

												children ScaledSphere { 
											
													scale 8 1 8	
										   		 
													appearance IS appearance

								    			}

											} 

											Transform {

												translation	0 0.22 0

												children ScaledSphere  { 
											
													scale 10 7 10	
										   		 
													appearance IS appearance
								    			}

											}

											Transform {

												translation	0 0.29 0

												children ScaledSphere { 
											
													scale 6 1 6			
										   		 
													appearance IS appearance
								    			}

											}

											Transform {

												translation	0 0.30 0

												children ScaledSphere { 
											
													scale 7 1 7			
										   		 
													appearance IS appearance
								    			}

											}

											Transform {

												translation	0 0.31 0   

												scale 10 2 10

												children DEF PolePiece1 Shape {

													geometry Cylinder {

														radius 0.01

														height 0.01
													}

													appearance IS appearance

												}

											}

											Transform {

												translation	0 0.33 0

												children ScaledSphere { 
											
													scale 7 1 7			 	
										   		 
													appearance IS appearance
								    			}

											}

											Transform {

												translation	0 0.34 0

												children ScaledSphere { 
											
													scale 6 1 6 		 	
										   		 
													appearance IS appearance
								    			}

											}

											CircleExtrusion {	 		

												spine [0 0.35 0,  0 0.37 0,  0 0.37 0,    0 0.59 0,  0 0.60 0 ]

												scale [0.08 0.08, 0.08 0.08, 0.075 0.075, 0.04 0.04, 0.04 0.04]

												caps TRUE	  	
										   		 
												appearance IS appearance

											}


											Transform {

												translation	0 0.61 0

												children ScaledSphere { 
											
													scale 5 1 5				
										   		 
													appearance IS appearance
								    			}

											}

											CircleExtrusion {	 		

												spine [0 0.615 0,  0 0.6210 0,  0 0.6225 0,    0 0.63 0,  0 0.6320 0 , 0 0.6330 0, 0 0.6350 0]

												scale [0.042 0.042, 0.035 0.035, 0.03 0.03, 0.04 0.04, 0.048 0.048, 0.05 0.05, 0.05 0.05]

												caps TRUE			  	
										   		 
												appearance IS appearance 

											}


											Transform {

												translation	0 0.675 0

												children Shape {

													geometry Box {

														size 0.11 0.08 0.11

													}

													appearance IS appearance

												}					

											}  

											DEF	PolePiece2 CircleExtrusion {

												spine [	0 0.715 0, 0 0.725 0, 0 0.73 0, 0 0.735 0 ]

												scale [ 0.05 0.05, 0.05 0.05, 0.045 0.045, 0.035 0.035 ]

												caps TRUE				
										   		 
												appearance IS appearance

											}

											Transform {

												translation	0 0.73 0

												scale 0.8 0.5 0.8	

												children Transform {

													translation	0 -0.715 0

													children USE PolePiece2	 

												}

											}

											CircleExtrusion	{

												spine [ 0 0.735 0, 0 0.74 0,  0 0.755 0, 0 0.77 0, 0 0.83 0,     0 0.84 0,  0 0.85 0 ]

												scale [ 0.03 0.03, 0.04 0.04, 0.05 0.05, 0.048 0.048, 0.03 0.03, 0.035 0.035, 0.04 0.04 ]  

												caps TRUE		   	
										   		 
												appearance IS appearance
				
											}

											Transform {

												translation	0 0.85 0

												children ScaledSphere { 
											
													scale 5 1.5 5		 	
										   		 
													appearance IS appearance
								    	
												}

											}

											Transform {

												translation	0 0.86 0

												scale 4 0.8 4

												children USE PolePiece1

											}

											Transform {

												translation	0 0.88 0

												children ScaledSphere { scale 5 2.5 5 appearance IS appearance }

											}

											Transform {

												translation	0 0.90 0

												scale 6 1 6

												children USE PolePiece1

											}

											Transform {

												translation	0 0.91 0  	

												children ScaledSphere { scale 8 2 8 appearance IS appearance }

											} 


											Transform {

												translation	0 0.93 0

												scale 3 1 3

												children USE PolePiece1

											}

											Transform {

												translation	0 0.93 0

												children DEF TopOfPole CircleExtrusion	{

													spine [ 0 0 0, 0 0.045 0, 0 0.07 0, 0 0.08 0 ]

													scale [ 0.01 0.01, 0.02 0.02, 0.02 0.02, 0.015 0.015 ]  

													caps TRUE	   	
										   		 
													appearance IS appearance

												}

											}

										]
									}
							
									Transform {

										translation	0 0.5 0

										children Shape {

											geometry Cylinder {
				
												radius 0.1

												height 1

											}		


											appearance IS appearance
										}

									}

								]
							}
							# Post ended, Fence start	  

							CircleExtrusion	{

								spine [ 0 0.91 0, -0.3272 0.91 1.92 ]

								scale 0.02 0.02	 	
										   		 
								appearance IS appearance

							}

							CircleExtrusion	{

								spine [ 0 0.695 0, -0.3272 0.695 1.92 ]

								scale 0.02 0.02  	
										   		 
								appearance IS appearance	

							}  
						]

					}			

					Transform {

						rotation 0 1 0 -0.0303

						children Transform {

							translation	IS translation

							children DEF BigVerticals CircleExtrusion	{

								spine [ 0 0 0, 0 0.91 0]

								scale 0.02 0.02  

								caps TRUE		  	
										   		 
								appearance IS appearance	

							}

						}

					}

					Transform {

						rotation 0 1 0 -0.0606

						children Transform {

							translation	IS translation

							children DEF SmallVerticals CircleExtrusion	{

								spine [ 0 0 0, 0 0.695 0]

								scale 0.02 0.02  

								caps TRUE		 	
										   		 
								appearance IS appearance	

							}

						}

					} 

					Transform {

						rotation 0 1 0 -0.0909

						children Transform {

							translation	IS translation

							children USE	BigVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.1202

						children Transform {

							translation	IS translation

							children USE	SmallVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.0909

						children Transform {

							translation	IS translation

							children USE	BigVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.1202

						children Transform {

							translation	IS translation

							children USE	SmallVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.1505

						children Transform {

							translation	IS translation

							children USE	BigVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.1808

						children Transform {

							translation	IS translation

							children USE	SmallVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.2101

						children Transform {

							translation	IS translation

							children USE	BigVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.2404

						children Transform {

							translation	IS translation

							children USE	SmallVerticals

						}

					}

					Transform {

						rotation 0 1 0 -0.2707

						children Transform {

							translation	IS translation

							children USE	BigVerticals

						}

					}
				]

			} 
	
			Transform {

				translation	IS translation

				children [

					Transform {

						translation	0 -0.4 0

						children Shape {

							geometry Cylinder {

								radius 0.1

								height 0.8

							}

							appearance IS appearance

						}

					}

					Transform {

						translation	0 -0.80 0

						children ScaledSphere {															
										   		 
							appearance IS appearance

							scale 15 10 15

						}

					}

					Transform {

						translation	0 -0.90 0

						children ScaledSphere {									
										   		 
							appearance IS appearance

							scale 15 15 15

						}

					}

					Transform {

						rotation 0 0 1 3.14

						translation	0 -1.05 0

						children USE	TopOfPole

					}

					Transform {

						rotation 0 1 0 1.57

						translation	-1.6 0 0.075

						children Shape {

							geometry Extrusion {

								crossSection [ 0 0, 0 1.5, 0.80 1.50, 3 0.2, 2 0, 0 0 ]
		   
								spine [ 0 0 0, 0.15 0 0 ]	
											

							}

							appearance IS appearance

						}

					}

				]  
			}

		]

	}

}

PROTO PorchBase
[
	field MFVec2f scale 6 6 	 

	field SFNode appearance NULL

]
{
	
	CircleExtrusion 
	{ 
		
		spine	[ 0 0 0, 0 0.1 0 ] 
		
		scale IS scale

		caps TRUE	

		appearance IS appearance
	
	}

}


PROTO LanternHouse 
[
	field SFNode appearance NULL
	field SFNode lanternAppearance NULL
]
{
	
	PROTO LanternBar
	[
		field MFVec2f scale 0.05 0.05
		field MFVec3f spine [0 0 0, 0 1.5 0]
		field SFNode appearance NULL
	]
	{

		CircleExtrusion
		{
			spine IS spine 

			appearance IS appearance

			scale IS scale
			caps TRUE	   	
		}

		
	}
					   
	PROTO LanternFence
	[
		field SFNode appearance NULL		  
	]
	{
	
		Group
		{
			children
			[
				
				Transform
				{
					translation	0 0 0
					children
					[
						LanternBar{ appearance IS appearance }
					]
				}

				Transform
				{
					translation	0 1.5 0
					children 
					[
						Shape
						{
							geometry Sphere
							{
								radius 0.08
							}
							appearance IS appearance
						}
					]
				}
			]
		}
	}



	PROTO LanternFenceGroupTransformation
	[
		field SFVec3f translation 0 0 0
		field SFRotation rotation 0 0 0 0
		field SFNode appearance NULL		 
	]
	{
		Group
		{
			children 
			[
				
				Transform	
				{
					translation	IS translation
					rotation IS	rotation
					children
					[
						LanternFence {appearance IS appearance }
					]
				}

			]
		}	
	}

	Group
	{
		children
		[
			
			#LanternBase
			Group
			{
				children 
				[

					
					CircleExtrusion
					{
						spine [ 0 0 0, 0 3.5 0 ]
						appearance IS appearance
						scale 4 4
						caps TRUE
					}

					Transform
					{
						translation	0 3 0
						children
						[
							CircleExtrusion
							{
								spine [ 0 0 0 , 0 0.5 0] 
								appearance IS appearance
								scale 4.3 4.3
								caps TRUE
							}


						]
					}

					Transform
					{
						translation	0 3.5 0
						children 
						[
							PorchBase 
							{
								scale  4.5 4.5 
								appearance IS appearance
							}
						]
					}
				]
			}

			#
			#
			#lightroom
			#
			#
			Group
			{
				
				children 
				[

					#LanterFence
					DEF	LanternFencePorch Transform
					{
						translation	4.0 0 0
						children LanternFenceGroupTransformation
						{
							translation	0 3.5  0
							appearance IS appearance
							
						}
					}		  
					Transform
					{
						rotation 0 1 0 0.5226
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 1.0452
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 1.5678
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 2.0904
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 2.613
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 3.1356
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 3.6582
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 4.1808
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 4.7034
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 5.226
						children USE LanternFencePorch
					}

					Transform
					{
						rotation 0 1 0 5.7486
						children USE LanternFencePorch
					}

					Transform
					{
						translation	0 4.9 0
						children DEF UpperPorchBar DonutExtrusion 
						{
							scale 2.1 1 2.1

							appearance IS appearance
						}
					}

					Transform
					{
						translation	0 3.8 0
						children USE UpperPorchBar
					}

			
					Transform
					{
						translation	0 3.5 0
						children
						[
							CircleExtrusion
							{
								spine [0 0 0, 0 2 0]
								scale 0 0 
								caps TRUE		
								appearance IS appearance
							}
						]
					}
				]
			}
						   
			###
			###	LanterCage
			###

	
			Group
			{
				children Transform
				{ 
					translation	0 3.9 0
					children
					[

						##
						## Bars
						##
						DEF	LanternHouseFence Transform
						{
							translation	2.8 0 0
							children LanternBar
							{
								spine [0 0 0, 0 4 0]	
								appearance IS appearance
							
							}
						}
		  
						Transform
						{
							rotation 0 1 0 0.7648
							children USE LanternHouseFence
						}
		  
						Transform
						{
							rotation 0 1 0 1.5296
							children USE LanternHouseFence
						}
		  
		  				Transform
						{
							rotation 0 1 0 2.2945
							children USE LanternHouseFence
						}
		  
		  				Transform
						{
							rotation 0 1 0 3.0593
							children USE LanternHouseFence
						}		  		  

		  				Transform
						{
							rotation 0 1 0 3.8242
							children USE LanternHouseFence
						}

		  				Transform
						{
							rotation 0 1 0 4.589
							children USE LanternHouseFence
						}

		  				Transform
						{
							rotation 0 1 0 5.3538
							children USE LanternHouseFence
						}

						##
						## Bars Cage
						##

 						Transform
						{
							translation	0 0 0
							children DEF Bar DonutExtrusion 
							{
								scale 1.4 1 1.4

								appearance IS appearance

							}
						}
   					
						Transform
						{
							translation	0 1 0
							children USE Bar
						}
   					
						Transform
						{
							translation	0 2 0
							children  USE Bar
						}

						Transform
						{
							
							translation	0 3 0
							children  USE Bar
						}

						Group {

							children [

								Shape {

									geometry Box {

										size 0.5 0.7 0.5

									}

									appearance IS lanternAppearance

								}
								
								DEF SpotlightRotator Transform { 

									children [

										Transform {

											translation	0 0.35 0

											rotation 1 0 0 1.57

											children Shape {

												geometry Extrusion {

													crossSection [ 0.8 0, 0.8 -0.5, 0.6 -0.5, 0.6 -0.2, -0.6 -0.2, -0.6 -0.5, -0.8 -0.5, -0.8 0, 0.8 0 ]
										   
													spine [ 0 -0.1 0, 0 0.1 0 ]

												}

												appearance IS lanternAppearance

											}

										}

										Transform {
									
											center -0.55 1.3 0
									
											children Transform {

												translation	-0.55 1.3 0

												children DEF Spotlight Group {
												   
													children [
														
														CircleExtrusion {

															spine [ 0 0 0, -0.5 0 0, -0.5 0 0, 0 0 0 ]

															scale [ 0.5 0.5, 0.5 0.5, 0.4 0.4, 0.4 0.4 ]

															caps TRUE

															appearance IS lanternAppearance

														}

														Transform { 

															translation	-0.5 0 0

															rotation 0 0 1 1.57
															
															children Shape {

																geometry Cylinder {

																	radius 0.4

																	height 0.05

																}

															}

														}
													]
										   
												} 

											}

										}

										Transform {
									
											center 0.55 1.3 0
									
											children Transform {

												translation	0.55 1.3 0

												rotation 0 1 0 3.14

												children USE Spotlight

											}

										}

										DEF LeftSpot SpotLight {

											direction -1 0 0

											intensity 3

											color 1 1 1

											beamWidth 1.270796

										} 

										DEF RightSpot Transform	{

											rotation 0 1 0 3.14

											children USE LeftSpot

										} 

									]
								
								}

								#Animations
								DEF spotAnimation TimeSensor {

									cycleInterval 6.000

									loop TRUE	
								   
									enabled TRUE

									startTime 0

								}

								DEF spotlightRotation OrientationInterpolator {
							
									key [0 0.33 0.66 1]
									keyValue [ 0 1 0 0, 0 1 0 2.094, 0 1 0 4.189, 0 1 0 6.283185307]

								} 

							]														  

							ROUTE spotAnimation.fraction_changed TO spotlightRotation.set_fraction	 
							ROUTE spotlightRotation.value_changed TO SpotlightRotator.set_rotation

						}

					]
				}
			}
	
			###
			###	LanternTop
			###
			Group	
			{
				children Transform
				{
					translation	0 8.9 0
					children 
					[
						Shape	  
						{
							geometry Cone
							{
								height 2
								bottom TRUE
								bottomRadius 3
							}
							appearance IS appearance
						}

						Transform
						{
							translation	0 1.2 0
							children
						    [
								Shape 
								{
									geometry Sphere
									{
										radius 0.5
									}

									appearance IS appearance
								}

								Transform
								{
									translation	0 -0.3 0
									children DonutExtrusion
									{
										scale 0.2 1 0.2
										extrusionScale 0.15 0.15
										appearance IS appearance
									
									}
								}

								Transform
								{
									translation	0 0.7 0
									children Shape	  
									{
										geometry Cone
										{
											height 0.5
											bottom TRUE
											bottomRadius 0.1
										}

										appearance IS appearance
									}
								}

								Transform
								{
									translation	0 1.3 0
									children Shape	  
									{
										geometry Cone
										{
											height 4
											bottom TRUE
											bottomRadius 0.01
										} 

										appearance IS appearance
									}
								}
							]
						}
					]
				}
			}		
			
		]
	}
}





PROTO	LighthouseTop [
	
	field SFNode appearance NULL

] {
	Group	{
		children [

			CircleExtrusion {

				spine [ 0 0 0, 0 3 0, 0 3 0, 0 0 0 ]

				scale [	4.5 4.5, 4.5 4.5, 4.3 4.3, 4.3 4.3 ]

				appearance IS appearance

			}

			Transform {

				translation	0 3 0
				
				children [
					
					PorchBase { appearance  IS appearance }

					DEF PorchOnEdge Transform {
		
						children PorchFenceAndSupport { 
				
							translation 5.8 0 0 
			
							appearance IS appearance

						}
		
					}

					Transform {

						rotation 0 1 0 0.3333
		
						children USE	PorchOnEdge

					}

					Transform {

						rotation 0 1 0 0.6666
		
						children USE	PorchOnEdge

					}

					Transform {

						rotation 0 1 0 0.9999
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 1.3333
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 1.6666
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 1.9999
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 2.3333
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 2.6666
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 2.9999
		
						children USE	PorchOnEdge

					}  

					Transform {

						rotation 0 1 0 3.3333
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 3.6666
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 3.9999
		
						children USE	PorchOnEdge

					}  

					Transform {

						rotation 0 1 0 4.3333
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 4.6666
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 4.9999
		
						children USE	PorchOnEdge

					}	 

					Transform {

						rotation 0 1 0 5.3333
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 5.6666
		
						children USE	PorchOnEdge

					} 

					Transform {

						rotation 0 1 0 5.9999
		
						children USE	PorchOnEdge

					}	  
	   
					LanternHouse { 
						
						appearance  IS appearance 
						
						lanternAppearance Appearance {

							material Material {

								diffuseColor 0.1 0.1 0.1

							}

						}
					
					}
				]

			}
		]
	}
}

Group {

	children [

		LighthouseBase {
	   
			OutterWallApp Appearance {

#				material Material {

#					diffuseColor 1 0.1 0.1

#				}

				texture	ImageTexture {

					url	["base-texture3.png"]

				}

				textureTransform TextureTransform {
					
					translation -0.328 0	

				}

				material Material {

					diffuseColor 1 0.2 0.2

				}

				

			}

			StoneApp Appearance	{

				texture ImageTexture {
					
					url	"granite-texture-small.jpg"
					
				}

				textureTransform TextureTransform {	
				
					scale 40 40	

				}
			}

	    }

		Transform {
		
			translation 0 5 0

			children LighthouseTower { 
			
				appearance Appearance {

					texture ImageTexture {
					
						url	"nwe.png" 
						
					}

				}
			
			}
			
		}

		Transform {

			translation	0 54 0
		   
			children LighthouseTop { 
				
				appearance Appearance {
			
					material Material {

						diffuseColor 0.1 0.1 0.1

						shininess 1.5

						specularColor 1 1 1

					}

				}
			}

		}			 	  

	]

}

DirectionalLight {

	direction 0 -1 -1

	intensity 5

	ambientIntensity 1

}  

Viewpoint {

	position 0 65 20
	

	description	"LightHouseLanternRoomView"

} 


  Viewpoint {

	position 0 88 0
	orientation	1 0 0 -1.57

	description	"LighthouseUpperView"

} 

Viewpoint {

	position 0 58 20
	

	description	"LightHouseTopView"

} 

Viewpoint {

	position 0 58 0

	description	"LighthousePorch"

}	  

Viewpoint {

	position 0 2 12

	description	"LighthouseDoor"

}  

NavigationInfo {
    type [ "WALK", "ANY" ]
    headlight FALSE
    speed 3.0
}